## Web Service

我们使用Java开发了一个查询当前软件版本的Web Service，调用时需传入当前用户的操作系统名称，然后服务会返回当前软件后端的版本号。

SOAP、WSDL、UDDI（UniversalDescriptionDiscovery andIntegration）三者构成了WebService的三要素.

- SOAP

  Web Service通过HTTP协议发送请求和接收结果时，发送的请求内容和结果内容都采用XML格式封装，并增加了一些特定的HTTP消息头，以说明HTTP消息的内容格式，这些特定的HTTP消息头和XML内容格式共同构成SOAP(Simple Object Access Protocol).

- WSDL

   WSDL(`Web Services Description Language`)是基于XML，用于描述Web Service及其函数、参数和返回值，是Web Service客户端和服务器端都能理解的标准格式.

- UDDI

  UDDI(`Universal Description, Discovery, and Integration`)是一种用于描述、发现、集成Web Service的技术，它是Web Service协议栈的一个重要部分。通过UDDI，企业可以根据自己的需要动态查找并使用Web服务，也可以将自己的Web服务动态地发布到UDDI注册中心，供其他用户使用。

代码实现如下：

### Java代码

``` java
@WebService()
public class Version {
  @WebMethod
  public String getVersion(String os) {
    String result = "King of Translator v1.3 for " + os;
    System.out.println(result);
    return result;
  }
  public static void main(String[] argv) {
    Object implementor = new Version();
    String address = "http://localhost:9000/Version";
    Endpoint.publish(address, implementor);
  }
}
```

### WSDL

```xml
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Generated by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e. -->
<definitions targetNamespace="http://translator/" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://translator/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <types>
    <xsd:schema>
      <xsd:import namespace="http://translator/" schemaLocation="VersionPortType_schema1.xsd"/>
    </xsd:schema>
  </types>
  <message name="getVersion">
    <part name="parameters" element="tns:getVersion"/>
  </message>
  <message name="getVersionResponse">
    <part name="parameters" element="tns:getVersionResponse"/>
  </message>
  <portType name="Version">
    <operation name="getVersion">
      <input ns1:Action="http://translator/Version/getVersionRequest" message="tns:getVersion" xmlns:ns1="http://www.w3.org/2007/05/addressing/metadata"/>
      <output ns2:Action="http://translator/Version/getVersionResponse" message="tns:getVersionResponse" xmlns:ns2="http://www.w3.org/2007/05/addressing/metadata"/>
    </operation>
  </portType>
</definitions>
```

